# Домашнее задание к занятию 7.2 «Основы Terraform. Yandex Cloud»

<details><summary><b>Цели задания</b></summary>

 1. Создать свои ресурсы в облаке Yandex Cloud с помощью Terraform.
 2. Освоить работу с переменными Terraform.

</details>

<details><summary><b>Чек-лист готовности к домашнему заданию</b></summary>

 1. Зарегистрирован аккаунт в Yandex Cloud. Использован промокод на грант.
 2. Установлен инструмент Yandex CLI.
 3. Исходный код для выполнения задания расположен в директории [02/src](https://github.com/netology-code/ter-homeworks/tree/main/02/src).

</details>

<details><summary><b>Задание 0</b></summary>

 1. Ознакомьтесь с [документацией к security-groups в Yandex Cloud](https://cloud.yandex.ru/docs/vpc/concepts/security-groups?from=int-console-help-center-or-nav).
 2. Запросите preview-доступ к этому функционалу в личном кабинете Yandex Cloud. Обычно его выдают в течение 24-х часов. https://console.cloud.yandex.ru/folders/<ваш cloud_id>/vpc/security-groups.
Этот функционал понадобится к следующей лекции.

</details>

***

## Задание 1

В качестве ответа всегда полностью прикладывайте ваш terraform-код в git.

1. Изучите проект. В файле variables.tf объявлены переменные для Yandex provider.
2. Переименуйте файл **personal.auto.tfvars_example** в **personal.auto.tfvars**. Заполните переменные: идентификаторы облака, токен доступа. Благодаря **.gitignore** этот файл не попадёт в публичный репозиторий. Вы можете выбрать иной способ безопасно передать секретные данные в terraform.
3. Сгенерируйте или используйте свой текущий ssh-ключ. Запишите его открытую часть в переменную vms_ssh_root_key.
4. Инициализируйте проект, выполните код. Исправьте намеренно допущенные синтаксические ошибки. Ищите внимательно, посимвольно. Ответьте, в чём заключается их суть.
5. Ответьте, как в процессе обучения могут пригодиться параметры `preemptible = true` и `core_fraction=5` в параметрах ВМ. Ответ в документации Yandex Cloud.

В качестве решения приложите:

+ скриншот ЛК Yandex Cloud с созданной ВМ;
+ скриншот успешного подключения к консоли ВМ через ssh. К OS ubuntu необходимо подключаться под пользователем ubuntu: "ssh ubuntu@vm_ip_address";
+ ответы на вопросы.

***

## Задание 2

1. Изучите файлы проекта.
2. Замените все хардкод-значения для ресурсов yandex_compute_image и yandex_compute_instance на отдельные переменные. К названиям переменных ВМ добавьте в начало префикс vm_web_ . Пример: **vm_web_name**.
3. Объявите нужные переменные в файле variables.tf, обязательно указывайте тип переменной. Заполните их **default** прежними значениями из main.tf.
4. Проверьте terraform plan. Изменений быть не должно.

***

## Задание 3







