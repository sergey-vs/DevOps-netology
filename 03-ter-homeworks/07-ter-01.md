# Домашнее задание к занятию 7.1 «Введение в Terraform»

<details><summary><b>Цель задания</b></summary>

1. Установить и настроить Terrafrom.
2. Научиться использовать готовый код.
</details>

***

<details><summary><b>Чеклист готовности к домашнему заданию</b></summary>

1. Скачайте и установите актуальную версию **terraform** >=1.4.X . Приложите скриншот вывода команды ```terraform --version```
2. Скачайте на свой ПК данный git репозиторий. Исходный код для выполнения задания расположен в директории **01/src**.
3. Убедитесь, что в вашей ОС установлен docker.
4. Зарегистрируйте аккаунт на сайте https://hub.docker.com/, выполните команду docker login и введите логин/пароль.

</details>

```bash
┌──(sergey㉿kali)-[~/terraform/practic]
└─$ terraform --version
Terraform v1.4.5
on linux_amd64
+ provider registry.terraform.io/hashicorp/random v3.5.1
+ provider registry.terraform.io/kreuzwerker/docker v3.0.2

Your version of Terraform is out of date! The latest version
is 1.5.4. You can update by downloading from https://www.terraform.io/downloads.html

```
<details><summary><b>Инструменты и дополнительные материалы, которые пригодятся для выполнения задания</b></summary>

1. Репозиторий с ссылкой на зеркало для установки и настройки Terraform  [ссылка](https://github.com/netology-code/devops-materials).
2. Установка docker [ссылка](https://docs.docker.com/engine/install/ubuntu/). 
</details>

***

## Задание 1

1. Перейдите в каталог [**src**](https://github.com/netology-code/ter-homeworks/tree/main/01/src). Скачайте все необходимые зависимости, использованные в проекте. 
2. Изучите файл **.gitignore**. В каком terraform файле согласно этому .gitignore допустимо сохранить личную, секретную информацию?

> *В файле* **personal.auto.tfvars**

3. Выполните код проекта. Найдите  в State-файле секретное содержимое созданного ресурса **random_password**, пришлите в качестве ответа конкретный ключ и его значение.

>"result": "NLgUWrw1qzhM0MT1"

4. Раскомментируйте блок кода, примерно расположенный на строчках 29-42 файла **main.tf**.
Выполните команду `terraform validate`. Объясните в чем заключаются намеренно допущенные ошибки? Исправьте их.

>│ Error: Invalid resource name   
>│  on main.tf line 29, in resource "docker_container" "`1`nginx":  
>│  29: resource "docker_container" "`1`nginx" {  

*Ошибка указывающая, что имя должно начинаться с буквы или символа подчеркивания и может содержать только буквы, цифры, знаки подчеркивания и тире*.

>│ Error: Missing name for resource  
>│   on main.tf line 24, in resource "docker_image":  
>│   24: resource "docker_image" {  

*Ошибка указывающая, что Все блоки ресурсов должны иметь 2 метки (тип, название).Добавляем название ресурса `nginx`.*

5. Выполните код. В качестве ответа приложите вывод команды ```docker ps```

6. Замените имя docker-контейнера в блоке кода на ```hello_world```. Не перепутайте имя контейнера и имя образа. Мы все еще продолжаем использовать name = "nginx:latest"! Выполните команду ```terraform apply -auto-approve```.
Объясните своими словами, в чем может быть опасность применения ключа  ```-auto-approve``` ? В качестве ответа дополнительно приложите вывод команды ```docker ps```
8. Уничтожьте созданные ресурсы с помощью **terraform**. Убедитесь, что все ресурсы удалены. Приложите содержимое файла **terraform.tfstate**. 
9. Объясните, почему при этом не был удален docker образ **nginx:latest** ? Ответ подкрепите выдержкой из документации **провайдера docker**.


------

## Дополнительные задания (со звездочкой*)

## Задание 2*

1. Изучите в документации provider [**Virtualbox**](https://docs.comcloud.xyz/providers/shekeriev/virtualbox/latest/docs) от 
shekeriev.
2. Создайте с его помощью любую виртуальную машину. Чтобы не использовать VPN советуем выбрать любой образ с расположением в github из [**списка**](https://www.vagrantbox.es/)

В качестве ответа приложите plan для создаваемого ресурса и скриншот созданного в VB ресурса. 

***

## Правила приема работы

Домашняя работа оформляется в отдельном GitHub репозитории в файле README.md.   
Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

<details><summary><b>Критерии оценки</b></summary>

Зачёт:

* выполнены все задания;
* ответы даны в развёрнутой форме;
* приложены соответствующие скриншоты и файлы проекта;
* в выполненных заданиях нет противоречий и нарушения логики.

На доработку:

* задание выполнено частично или не выполнено вообще;
* в логике выполнения заданий есть противоречия и существенные недостатки. 

</details>
